<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Forever Rose</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #ff4d6d; --secondary: #ff8fa3; --dark: #0f0c29; }
        body, html { margin: 0; padding: 0; background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); color: white; font-family: 'Poppins', sans-serif; overflow: hidden; height: 100%; }
        
        .screen { display: none; height: 100vh; width: 100vw; flex-direction: column; align-items: center; justify-content: center; position: absolute; animation: fadeIn 1s ease-in; }
        .active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        /* Stage 1: Garden */
        .garden-rose { position: absolute; cursor: pointer; font-size: 2.5rem; filter: drop-shadow(0 0 10px var(--primary)); transition: 0.3s; }
        .garden-rose:hover { transform: scale(1.3); }

        /* Stage 2: Photos */
        .photo-card { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 8px 32px rgba(0,0,0,0.3); transform: rotate(var(--r)); margin: 10px; transition: 0.5s; cursor: pointer; }
        .photo-card:hover { transform: rotate(0deg) scale(1.1); z-index: 10; border-color: var(--primary); }
        .photo-card img { width: 180px; height: 180px; object-fit: cover; border-radius: 10px; }

        /* Stage 3: The Unlock */
        .heart-btn { font-size: 5rem; cursor: pointer; animation: pulse 1.5s infinite; transition: 0.3s; filter: drop-shadow(0 0 20px var(--primary)); }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .unlock-progress { width: 200px; height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; margin-top: 20px; }
        .progress-fill { width: 0%; height: 100%; background: var(--primary); border-radius: 5px; transition: 0.1s; }

        /* Buttons */
        .btn { margin-top: 30px; padding: 12px 35px; background: var(--primary); border: none; border-radius: 50px; color: white; font-weight: 600; cursor: pointer; transition: 0.3s; }
        .btn:hover { background: var(--secondary); transform: translateY(-3px); }
    </style>
</head>
<body>

    <div id="stage1" class="screen active">
        <h1 style="text-shadow: 0 0 20px var(--primary);">The Garden of Secrets</h1>
        <p>Somewhere among these roses is a portal to our memories...</p>
        <div id="garden"></div>
    </div>

    <div id="stage2" class="screen">
        <h1>Moments That Bloom Forever</h1>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; max-width: 800px;">
            <div class="photo-card" style="--r: -5deg;"><img src="https://via.placeholder.com/180?text=Us+1" alt="Memory 1"><p>The First Day</p></div>
            <div class="photo-card" style="--r: 3deg;"><img src="https://via.placeholder.com/180?text=Us+2" alt="Memory 2"><p>The Best Smile</p></div>
            <div class="photo-card" style="--r: -2deg;"><img src="https://via.placeholder.com/180?text=Us+3" alt="Memory 3"><p>Our Favorite Spot</p></div>
        </div>
        <button class="btn" onclick="nextStage(2, 3)">Continue to the Heart</button>
    </div>

    <div id="stage3" class="screen">
        <h2 id="lock-title">Hold the Heart to Unlock</h2>
        <div class="heart-btn" onmousedown="startUnlock()" onmouseup="stopUnlock()" ontouchstart="startUnlock()" ontouchend="stopUnlock()">‚ù§Ô∏è</div>
        <div class="unlock-progress"><div id="fill" class="progress-fill"></div></div>
        
        <div id="final-reveal" style="display:none; text-align: center; padding: 20px; max-width: 400px; background: rgba(0,0,0,0.5); border-radius: 20px; backdrop-filter: blur(10px);">
            <h1 style="color: var(--primary);">Happy Rose Day!</h1>
            <p>Every petal on this site represents a second I've spent thinking about you today. I might be miles away, but you're always here with me. ‚ù§Ô∏è</p>
            <p style="font-size: 0.8rem; opacity: 0.7;">- Yours Forever</p>
        </div>
    </div>

    <script>
        // Stage 1 Garden Setup
        const garden = document.getElementById('garden');
        const roseCount = 50;
        for(let i=0; i<roseCount; i++) {
            const r = document.createElement('div');
            r.className = 'garden-rose';
            r.innerHTML = 'üåπ';
            r.style.left = Math.random() * 95 + 'vw';
            r.style.top = Math.random() * 90 + 'vh';
            r.onclick = () => {
                if(i === 25) { // The "Magic" Rose
                    confetti({ particleCount: 200, spread: 100 });
                    setTimeout(() => nextStage(1, 2), 1000);
                } else {
                    r.style.opacity = '0.2';
                    r.style.pointerEvents = 'none';
                }
            };
            garden.appendChild(r);
        }

        function nextStage(current, next) {
            document.getElementById('stage' + current).classList.remove('active');
            document.getElementById('stage' + next).classList.add('active');
        }

        // Stage 3 Hold Logic
        let holdTimer;
        let progress = 0;
        function startUnlock() {
            holdTimer = setInterval(() => {
                progress += 5;
                document.getElementById('fill').style.width = progress + '%';
                if(progress >= 100) {
                    clearInterval(holdTimer);
                    document.querySelector('.heart-btn').style.display = 'none';
                    document.querySelector('.unlock-progress').style.display = 'none';
                    document.getElementById('lock-title').style.display = 'none';
                    document.getElementById('final-reveal').style.display = 'block';
                    confetti({ particleCount: 300, spread: 160 });
                }
            }, 50);
        }
        function stopUnlock() {
            clearInterval(holdTimer);
            if(progress < 100) {
                progress = 0;
                document.getElementById('fill').style.width = '0%';
            }
        }
    </script>
</body>
</html>
